"use strict";(self.webpackChunktracker=self.webpackChunktracker||[]).push([[550],{7550:(a,t,e)=>{e.d(t,{initializeDatabase:()=>b});var n=e(2555),o=e(5806),r=e(2631),s=e(943),i=e(9119);function c(a){const t=(0,i.a)(a).getDay();return 0===t||6===t}var d=e(7426);const l=[{PK:"U-12345",FirstName:"Ellis",LastName:"Taylor",AnnualGross:48e3,Pension:1450,NationalIns:5e3},{PK:"U-67890",FirstName:"Sarah",LastName:"Johnson",AnnualGross:52e3,Pension:1560,NationalIns:5200},{PK:"U-11111",FirstName:"Michael",LastName:"Chen",AnnualGross:45e3,Pension:1350,NationalIns:4800}],u=[{PK:"G-001",Title:"Digital Health Innovation Project",StartDate:"2024-10-01",EndDate:"2025-09-30",ManagerUserID:"U-12345"},{PK:"G-002",Title:"AI Research Initiative",StartDate:"2024-12-01",EndDate:"2025-11-30",ManagerUserID:"U-67890"},{PK:"G-003",Title:"Sustainable Technology Development",StartDate:"2025-01-01",EndDate:"2025-12-31",ManagerUserID:"U-11111"}],g=(a,t)=>{const e={};return(0,r.k)({start:a,end:t}).forEach((a=>{const t=(0,s.GP)(a,"yyyy-MM-dd");e[t]=!c(a)})),e},h=(a,t)=>{const e={};return(0,r.k)({start:a,end:t}).forEach((a=>{const t=(0,s.GP)(a,"yyyy-MM-dd");c(a)||(e[t]=o.yS)})),e},y=(a,t)=>{const e=[];return Object.keys(t).filter((a=>t[a])).forEach(((t,n)=>{const r=u.filter((a=>t>=a.StartDate&&t<=a.EndDate));if(0===r.length)return;const s=[()=>[{grantId:r[0].PK,percent:100,hours:8}],()=>r.length>=2?[{grantId:r[0].PK,percent:60,hours:4.8},{grantId:r[1].PK,percent:40,hours:3.2}]:[{grantId:r[0].PK,percent:100,hours:8}],()=>r.length>=3?[{grantId:r[0].PK,percent:50,hours:4},{grantId:r[1].PK,percent:30,hours:2.4},{grantId:r[2].PK,percent:20,hours:1.6}]:[{grantId:r[0].PK,percent:100,hours:8}],()=>[{grantId:r[0].PK,percent:75,hours:6}]];s[(n+new Date(t).getDay())%s.length]().forEach((n=>{e.push({PK:a,SK:(0,o.generateTimeSlotKey)(t,n.grantId),AllocationPercent:n.percent,HoursAllocated:n.hours,Date:t,GrantID:n.grantId,UserID:a})}))})),e},w=async()=>{try{console.log("Starting database seeding..."),await o.db.transaction("rw",[o.db.individuals,o.db.grants,o.db.workdays,o.db.workdayHours,o.db.timeslots],(async()=>{await o.db.individuals.clear(),await o.db.grants.clear(),await o.db.workdays.clear(),await o.db.workdayHours.clear(),await o.db.timeslots.clear()})),console.log("Seeding individuals...");for(const n of l)await o.db.individuals.put(n);console.log("Seeding grants...");for(const n of u)await o.db.grants.put(n);const a=new Date("2025-01-01"),t=(0,d.p)(a),e=new Date("2025-02-01"),r=(0,d.p)(e);console.log("Seeding workdays and time slots...");for(const c of l){const s=g(a,t),i=h(a,t),d=g(e,r),l=h(e,r),u=(0,n.A)((0,n.A)({},s),d),w=(0,n.A)((0,n.A)({},i),l);await o.db.workdays.put({PK:c.PK,SK:(0,o.YA)(c.PK,2025),Workdays:u}),await o.db.workdayHours.put({PK:c.PK,SK:(0,o.NY)(c.PK,2025),Hours:w});const b=y(c.PK,u);for(const a of b)await o.db.timeslots.put(a)}console.log("Database seeding completed successfully!"),console.log("Seeded ".concat(l.length," individuals, ").concat(u.length," grants"));const s=await o.db.timeslots.count(),i=await o.db.workdays.count();console.log("Generated ".concat(i," workday records and ").concat(s," time slot allocations"))}catch(a){throw console.error("Database seeding failed:",a),a}},b=async()=>{try{await(async()=>{try{return 0===await o.db.individuals.count()}catch(a){return console.error("Error checking database state:",a),!0}})()?(console.log("Database is empty, auto-seeding..."),await w()):console.log("Database already contains data, skipping auto-seed")}catch(a){console.error("Database initialization failed:",a),await w()}}}}]);
//# sourceMappingURL=550.89b8f070.chunk.js.map